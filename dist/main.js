(()=>{"use strict";const r=(()=>{const r={};return{subscribe:function(e,i){r[e]||(r[e]=[]),r[e].push(i)},publish:function(e,i){r[e]&&r[e].forEach((r=>{r(i)}))},unsubscribe:function(e,i){if(r[e])for(let n=0;n<r[e].length;n+=1)if(r[e][n]===i)return r[e].splice(n,1),!0;return!1}}})(),e=(()=>{const e=Array.from({length:3},(()=>new Array(3).fill(".")));function i(){for(let r=0;r<3;r+=1)for(let i=0;i<3;i+=1)e[r][i]=0}return r.subscribe("gameEnd",i),{exposeGrid:function(){let r="";return e.forEach((e=>{r=`${r}${JSON.stringify(e)}\n`})),e},pickGrid:function(e,i,n,t){if(i<0||i>=3||n<0||n>=3)return!1;if("."!==e[i][n])return!1;const u=new Array(3);for(let r=0;r<3;r+=1)u[r]=e[r].slice();return u[i][n]=t,r.publish("gridPicked",[i,n]),u},getResult:function(e){for(let i=0;i<3;i+=1){const n=e[i][0];if("."!==n)for(let t=1;t<3&&e[i][t]===n;t+=1)if(2===t)return r.publish("winnerDecided",n),n;const t=e[0][i];if("."!==t)for(let n=1;n<3&&e[n][i]===t;n+=1)if(2===n)return r.publish("winnerDecided",t),t}if("."!==e[0][0])for(let i=1;i<3&&e[i][i]===e[0][0];i+=1)if(2===i)return r.publish("winnerDecided",e[0][0]),e[0][0];if("."!==e[0][2])for(let i=1;i<3&&e[i][2-i]===e[0][2];i+=1)if(2===i)return r.publish("winnerDecided",e[0][2]),e[0][2];return!1},resetGrid:i}})();(()=>{let e=!0;r.subscribe("gridPicked",(function(){e=!e}))})(),e.exposeGrid(),window.gameBoard={pickGrid:e.pickGrid,resetGrid:e.resetGrid}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxHQUNULElBQUssSUFBSXZCLEVBQUksRUFBR0EsRUFoRFIsR0FpREZpQixFQUFJakIsR0FBR3VCLEVBQVV2QixLQUFPaUIsRUFBSSxHQUFHTSxHQURadkIsR0FBSyxFQUU1QixHQUFVdUIsSUFBTnZCLEVBRUYsT0FEQVUsRUFBT2QsUUFBUSxnQkFBaUJxQixFQUFJLEdBQUdNLElBQ2hDTixFQUFJLEdBQUdNLEdBSXBCLE9BQU8sQ0FDVCxFQTBCbUNoQixZQUVwQyxFQXRGaUIsR0NBSixNQUVaLElBQUlrQixHQUFjLEVBV2xCZixFQUFPbEIsVUFBVSxjQUpqQixXQUNFaUMsR0FBZUEsQ0FDakIsR0FLRCxFQWhCYSxHQ0NkQyxFQUFVZixhQUdWZ0IsT0FBT0QsVUFBWSxDQUFFVixTQUFVVSxFQUFVVixTQUFVVCxVQUFXbUIsRUFBVW5CLFUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS13ZWJwYWNrLXByb2plY3QvLi9zcmMvcHViU3ViLmpzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9nYW1lQm9hcmQuanMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL2xvZ2ljLmpzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwdWJTdWIgPSAoKCkgPT4ge1xyXG4gIGNvbnN0IG1hcCA9IHt9O1xyXG5cclxuICAvLyBNZXRob2QgZGVjbGFyYXRpb25cclxuICBmdW5jdGlvbiBzdWJzY3JpYmUoZXZlbnQsIGZuKSB7XHJcbiAgICBpZiAoIW1hcFtldmVudF0pIG1hcFtldmVudF0gPSBbXTtcclxuICAgIG1hcFtldmVudF0ucHVzaChmbik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBwdWJsaXNoKGV2ZW50LCBkYXRhKSB7XHJcbiAgICBpZiAobWFwW2V2ZW50XSkge1xyXG4gICAgICBtYXBbZXZlbnRdLmZvckVhY2goKGZuKSA9PiB7XHJcbiAgICAgICAgZm4oZGF0YSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdW5zdWJzY3JpYmUoZXZlbnQsIGZuKSB7XHJcbiAgICBpZiAobWFwW2V2ZW50XSkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcFtldmVudF0ubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICBpZiAobWFwW2V2ZW50XVtpXSA9PT0gZm4pIHtcclxuICAgICAgICAgIG1hcFtldmVudF0uc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICByZXR1cm4geyBzdWJzY3JpYmUsIHB1Ymxpc2gsIHVuc3Vic2NyaWJlIH07XHJcbn0pKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBwdWJTdWI7XHJcbiIsImltcG9ydCBwdWJTdWIgZnJvbSAnLi9wdWJTdWInO1xyXG5cclxuY29uc3QgZ2FtZUJvYXJkID0gKCgpID0+IHtcclxuICBjb25zdCBsZW4gPSAzO1xyXG4gIGNvbnN0IGJvYXJkTWF0ID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogbGVuIH0sICgpID0+IG5ldyBBcnJheShsZW4pLmZpbGwoJy4nKSk7XHJcblxyXG4gIC8vIE1ldGhvZCBkZWNsYXJhdGlvblxyXG4gIGZ1bmN0aW9uIGV4cG9zZUdyaWQoKSB7IC8vIElNUFVSRSwgVU5URVNURURcclxuICAgIGxldCBvdXRwdXRTdHIgPSAnJztcclxuICAgIGJvYXJkTWF0LmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgICBvdXRwdXRTdHIgPSBgJHtvdXRwdXRTdHJ9JHtKU09OLnN0cmluZ2lmeShyb3cpfVxcbmA7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBib2FyZE1hdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldFJlc3VsdChtYXQpIHsgLy8gSU1QVVJFLCBQQVNTRUQgV0lUSCBNT0NLIFBVQlNVQlxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xyXG4gICAgICAvLyBSb3ctd2lzZVxyXG4gICAgICBjb25zdCByb3dSZWYgPSBtYXRbaV1bMF07XHJcbiAgICAgIGlmIChyb3dSZWYgIT09ICcuJykge1xyXG4gICAgICAgIGZvciAobGV0IGMgPSAxOyBjIDwgbGVuOyBjICs9IDEpIHtcclxuICAgICAgICAgIGlmIChtYXRbaV1bY10gIT09IHJvd1JlZikgYnJlYWs7XHJcbiAgICAgICAgICBpZiAoYyA9PT0gbGVuIC0gMSkge1xyXG4gICAgICAgICAgICBwdWJTdWIucHVibGlzaCgnd2lubmVyRGVjaWRlZCcsIHJvd1JlZik7XHJcbiAgICAgICAgICAgIHJldHVybiByb3dSZWY7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIENvbHVtbi13aXNlXHJcbiAgICAgIGNvbnN0IGNvbFJlZiA9IG1hdFswXVtpXTtcclxuICAgICAgaWYgKGNvbFJlZiAhPT0gJy4nKSB7XHJcbiAgICAgICAgZm9yIChsZXQgciA9IDE7IHIgPCBsZW47IHIgKz0gMSkge1xyXG4gICAgICAgICAgaWYgKG1hdFtyXVtpXSAhPT0gY29sUmVmKSBicmVhaztcclxuICAgICAgICAgIGlmIChyID09PSBsZW4gLSAxKSB7XHJcbiAgICAgICAgICAgIHB1YlN1Yi5wdWJsaXNoKCd3aW5uZXJEZWNpZGVkJywgY29sUmVmKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbFJlZjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIERpYWdvbmFsc1xyXG4gICAgaWYgKG1hdFswXVswXSAhPT0gJy4nKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuOyBpICs9IDEpIHtcclxuICAgICAgICBpZiAobWF0W2ldW2ldICE9PSBtYXRbMF1bMF0pIGJyZWFrO1xyXG4gICAgICAgIGlmIChpID09PSBsZW4gLSAxKSB7XHJcbiAgICAgICAgICBwdWJTdWIucHVibGlzaCgnd2lubmVyRGVjaWRlZCcsIG1hdFswXVswXSk7XHJcbiAgICAgICAgICByZXR1cm4gbWF0WzBdWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKG1hdFswXVtsZW4gLSAxXSAhPT0gJy4nKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuOyBpICs9IDEpIHtcclxuICAgICAgICBpZiAobWF0W2ldW2xlbiAtIDEgLSBpXSAhPT0gbWF0WzBdW2xlbiAtIDFdKSBicmVhaztcclxuICAgICAgICBpZiAoaSA9PT0gbGVuIC0gMSkge1xyXG4gICAgICAgICAgcHViU3ViLnB1Ymxpc2goJ3dpbm5lckRlY2lkZWQnLCBtYXRbMF1bbGVuIC0gMV0pO1xyXG4gICAgICAgICAgcmV0dXJuIG1hdFswXVtsZW4gLSAxXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHBpY2tHcmlkKG1hdCwgciwgYywgc3ltYikgeyAvLyBJTVBVUkUsIFBBU1NFRCBXSVRIIE1PQ0sgUFVCU1VCXHJcbiAgICBpZiAociA8IDAgfHwgciA+PSBsZW4gfHwgYyA8IDAgfHwgYyA+PSBsZW4pIHJldHVybiBmYWxzZTtcclxuICAgIGlmIChtYXRbcl1bY10gIT09ICcuJykgcmV0dXJuIGZhbHNlO1xyXG4gICAgY29uc3QgbmV3TWF0ID0gbmV3IEFycmF5KGxlbik7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSArPSAxKSB7XHJcbiAgICAgIG5ld01hdFtpXSA9IG1hdFtpXS5zbGljZSgpO1xyXG4gICAgfVxyXG4gICAgbmV3TWF0W3JdW2NdID0gc3ltYjtcclxuICAgIHB1YlN1Yi5wdWJsaXNoKCdncmlkUGlja2VkJywgW3IsIGNdKTtcclxuICAgIHJldHVybiBuZXdNYXQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZXNldEdyaWQoKSB7IC8vIElNUFVSRSwgVU5URVNURURcclxuICAgIGZvciAobGV0IHIgPSAwOyByIDwgbGVuOyByICs9IDEpIHtcclxuICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBsZW47IGMgKz0gMSkge1xyXG4gICAgICAgIGJvYXJkTWF0W3JdW2NdID0gMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRXZlbnQgc3Vic2NyaXB0aW9uXHJcbiAgcHViU3ViLnN1YnNjcmliZSgnZ2FtZUVuZCcsIHJlc2V0R3JpZCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBleHBvc2VHcmlkLCBwaWNrR3JpZCwgZ2V0UmVzdWx0LCByZXNldEdyaWQsXHJcbiAgfTtcclxufSkoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWVCb2FyZDtcclxuIiwiaW1wb3J0IHB1YlN1YiBmcm9tICcuL3B1YlN1Yic7XHJcblxyXG5jb25zdCBsb2dpYyA9ICgoKSA9PiB7XHJcbiAgLy8gTG9naWMgdmFyaWFibGVzXHJcbiAgbGV0IGlzQ3Jvc3NUdXJuID0gdHJ1ZTtcclxuXHJcbiAgLy8gTWV0aG9kIGRlY2xhcmF0aW9uXHJcbiAgZnVuY3Rpb24gZXhwb3NlSXNDcm9zc1R1cm4oKSB7IC8vIElNUFVSRSwgVU5URVNURURcclxuICAgIHJldHVybiBpc0Nyb3NzVHVybjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNoYW5nZVR1cm4oKSB7IC8vIElNUFVSRSwgVU5URVNURURcclxuICAgIGlzQ3Jvc3NUdXJuID0gIWlzQ3Jvc3NUdXJuO1xyXG4gIH1cclxuXHJcbiAgcHViU3ViLnN1YnNjcmliZSgnZ3JpZFBpY2tlZCcsIGNoYW5nZVR1cm4pO1xyXG5cclxuICByZXR1cm4geyBleHBvc2VJc0Nyb3NzVHVybiwgY2hhbmdlVHVybiB9O1xyXG59KSgpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbG9naWM7XHJcbiIsImltcG9ydCBnYW1lQm9hcmQgZnJvbSAnLi9nYW1lQm9hcmQnO1xuaW1wb3J0IGxvZ2ljIGZyb20gJy4vbG9naWMnO1xuXG5nYW1lQm9hcmQuZXhwb3NlR3JpZCgpO1xuXG4vLyBFeHBvc2UgaW50ZXJmYWNlIGZ1bmN0aW9uc1xud2luZG93LmdhbWVCb2FyZCA9IHsgcGlja0dyaWQ6IGdhbWVCb2FyZC5waWNrR3JpZCwgcmVzZXRHcmlkOiBnYW1lQm9hcmQucmVzZXRHcmlkIH07XG4iXSwibmFtZXMiOlsibWFwIiwic3Vic2NyaWJlIiwiZXZlbnQiLCJmbiIsInB1c2giLCJwdWJsaXNoIiwiZGF0YSIsImZvckVhY2giLCJ1bnN1YnNjcmliZSIsImkiLCJsZW5ndGgiLCJzcGxpY2UiLCJib2FyZE1hdCIsIkFycmF5IiwiZnJvbSIsImZpbGwiLCJyZXNldEdyaWQiLCJyIiwiYyIsInB1YlN1YiIsImV4cG9zZUdyaWQiLCJvdXRwdXRTdHIiLCJyb3ciLCJKU09OIiwic3RyaW5naWZ5IiwicGlja0dyaWQiLCJtYXQiLCJzeW1iIiwibmV3TWF0Iiwic2xpY2UiLCJnZXRSZXN1bHQiLCJyb3dSZWYiLCJsZW4iLCJjb2xSZWYiLCJpc0Nyb3NzVHVybiIsImdhbWVCb2FyZCIsIndpbmRvdyJdLCJzb3VyY2VSb290IjoiIn0=